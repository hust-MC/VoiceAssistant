# Map çš„ç›‘å¬æœºåˆ¶è¯¦è§£

## ğŸ¤” ä½ çš„ç–‘é—®

**map æ˜¯å¦æœ‰ç›‘å¬æ•ˆæœï¼Ÿ**

```kotlin
val acState: StateFlow<ACState> = vehicleState
    .map { it.ac }
    .stateIn(...)

// é—®é¢˜ï¼š
// 1. æ›´æ”¹ VehicleState çš„ä»»æ„å€¼ï¼Œä¼šé€šçŸ¥æ‰€æœ‰ç›¸å…³çš„ map å—ï¼Ÿ
// 2. map ä¼šè‡ªåŠ¨æ‰§è¡Œè½¬æ¢å—ï¼Ÿ
// 3. æœ€åé€šçŸ¥åˆ° collect å—ï¼Ÿ
```

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼map æœ‰ç›‘å¬æ•ˆæœï¼** è®©æˆ‘è¯¦ç»†è§£é‡Šã€‚

---

## âœ… æ ¸å¿ƒç­”æ¡ˆ

**æ˜¯çš„ï¼Œmap ä¼š"ç›‘å¬"æº Flow çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œè½¬æ¢ï¼**

```
VehicleState å˜åŒ–
    â†“
è‡ªåŠ¨è§¦å‘ map { it.ac }
    â†“
æ–°çš„ ACState é€šè¿‡ Flow å‘å‡º
    â†“
stateIn è½¬æ¢ä¸º StateFlow
    â†“
é€šçŸ¥æ‰€æœ‰ collect è®¢é˜…è€…
```

---

## ğŸ” è¯¦ç»†æµç¨‹

### å®Œæ•´çš„æ•°æ®æµ

```kotlin
// ========== Step 1: åˆ›å»ºæ•°æ®æº ==========
val vehicleState = MutableStateFlow(
    VehicleState(
        ac = ACState(temperature = 24),
        door = DoorState(isLocked = true)
    )
)

// ========== Step 2: åˆ›å»º map è½¬æ¢ï¼ˆå»ºç«‹"ç›‘å¬"ï¼‰ ==========
val acFlow: Flow<ACState> = vehicleState.map { vehicleState ->
    // è¿™ä¸ª lambda ä¼šåœ¨ vehicleState å‘å‡ºæ–°å€¼æ—¶è‡ªåŠ¨æ‰§è¡Œ
    vehicleState.ac
}

// âš ï¸ æ³¨æ„ï¼šæ­¤æ—¶è¿˜æ²¡æœ‰è®¢é˜…è€…ï¼Œmap ä¸ä¼šæ‰§è¡Œ
// map åªæ˜¯å®šä¹‰äº†"è½¬æ¢è§„åˆ™"ï¼Œè¿˜æ²¡æœ‰å¼€å§‹"ç›‘å¬"

// ========== Step 3: è½¬æ¢ä¸º StateFlowï¼ˆå¼€å§‹"ç›‘å¬"ï¼‰ ==========
val acState: StateFlow<ACState> = acFlow.stateIn(
    scope = viewModelScope,
    started = SharingStarted.WhileSubscribed(5000),
    initialValue = vehicleState.value.ac
)

// âœ… æ­¤æ—¶ stateIn ä¼šï¼š
// 1. å¼€å§‹"ç›‘å¬" vehicleState çš„å˜åŒ–
// 2. å½“ vehicleState å‘å‡ºæ–°å€¼æ—¶ï¼Œè§¦å‘ map è½¬æ¢
// 3. å°†è½¬æ¢åçš„å€¼ä¿å­˜åœ¨ StateFlow ä¸­

// ========== Step 4: UI è®¢é˜…ï¼ˆå¼€å§‹"ç›‘å¬"ï¼‰ ==========
lifecycleScope.launch {
    acState.collectLatest { acState ->
        updateACUI(acState)  // å½“ acState å˜åŒ–æ—¶æ‰§è¡Œ
    }
}

// âœ… æ­¤æ—¶å®Œæ•´çš„ç›‘å¬é“¾å»ºç«‹ï¼š
// vehicleState å˜åŒ– â†’ map è½¬æ¢ â†’ acState æ›´æ–° â†’ collect æ‰§è¡Œ
```

---

## ğŸ“Š æ—¶é—´çº¿æ¼”ç¤º

### åœºæ™¯ï¼šæ¸©åº¦ä» 24Â°C æ”¹ä¸º 25Â°C

```
æ—¶åˆ» T0ï¼šåˆå§‹åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vehicleState.value = VehicleState(          â”‚
â”‚   ac = ACState(temperature: 24),            â”‚
â”‚   door = DoorState(isLocked: true)          â”‚
â”‚ )                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ—¶åˆ» T1ï¼šåˆ›å»º mapï¼ˆè¿˜æ²¡å¼€å§‹ç›‘å¬ï¼‰
val acFlow = vehicleState.map { it.ac }
// åªæ˜¯å®šä¹‰äº†è½¬æ¢è§„åˆ™ï¼Œè¿˜æ²¡æœ‰æ‰§è¡Œ

æ—¶åˆ» T2ï¼šstateIn å¼€å§‹ç›‘å¬
val acState = acFlow.stateIn(...)
// âœ… å¼€å§‹ç›‘å¬ vehicleState
// âœ… ç«‹å³æå–åˆå§‹å€¼ï¼šACState(temperature: 24)

æ—¶åˆ» T3ï¼šUI è®¢é˜…
acState.collectLatest { acState ->
    updateACUI(acState)  // ç«‹å³æ‰§è¡Œï¼Œæ˜¾ç¤º 24Â°C
}
// âœ… ç›‘å¬é“¾å®Œæ•´å»ºç«‹

æ—¶åˆ» T4ï¼šæ›´æ–° VehicleStateï¼ˆå…³é”®æ—¶åˆ»ï¼ï¼‰
vehicleState.value = vehicleState.value.copy(
    ac = vehicleState.value.ac.copy(temperature = 25)
)

æ‰§è¡Œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. vehicleState å‘å‡ºæ–°å€¼                    â”‚
â”‚    VehicleState(ac = ACState(temperature: 25))â”‚
â”‚    â†“                                        â”‚
â”‚ 2. map { it.ac } è‡ªåŠ¨æ‰§è¡Œï¼ˆç›‘å¬ç”Ÿæ•ˆï¼‰       â”‚
â”‚    æå– ac å±æ€§                             â”‚
â”‚    ACState(temperature: 25)                 â”‚
â”‚    â†“                                        â”‚
â”‚ 3. acFlow å‘å‡ºæ–°å€¼                          â”‚
â”‚    Flow<ACState> å‘å‡º ACState(temperature: 25)â”‚
â”‚    â†“                                        â”‚
â”‚ 4. stateIn æ›´æ–° StateFlow                   â”‚
â”‚    acState.value = ACState(temperature: 25) â”‚
â”‚    â†“                                        â”‚
â”‚ 5. é€šçŸ¥æ‰€æœ‰ collect è®¢é˜…è€…                  â”‚
â”‚    collectLatest { acState ->               â”‚
â”‚      updateACUI(acState)  // æ‰§è¡Œï¼æ˜¾ç¤º 25Â°Câ”‚
â”‚    }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¬ éªŒè¯ä»£ç 

### æµ‹è¯•ï¼šmap çš„ç›‘å¬æ•ˆæœ

```kotlin
// ========== æµ‹è¯•ä»£ç  ==========
val vehicleState = MutableStateFlow(
    VehicleState(ac = ACState(temperature = 24))
)

// åˆ›å»º map
val acFlow: Flow<ACState> = vehicleState.map { vehicleState ->
    println("ğŸ”¥ map æ‰§è¡Œäº†ï¼æå–æ¸©åº¦: ${vehicleState.ac.temperature}")
    vehicleState.ac
}

// è½¬æ¢ä¸º StateFlowï¼ˆå¼€å§‹ç›‘å¬ï¼‰
val acState: StateFlow<ACState> = acFlow.stateIn(
    scope = viewModelScope,
    started = SharingStarted.WhileSubscribed(5000),
    initialValue = vehicleState.value.ac
)

// è®¢é˜…
lifecycleScope.launch {
    acState.collectLatest { acState ->
        println("ğŸ“± UI æ”¶åˆ°æ¸©åº¦æ›´æ–°: ${acState.temperature}Â°C")
    }
}

// æ›´æ–°çŠ¶æ€
println("=== å¼€å§‹æ›´æ–°æ¸©åº¦ ===")
vehicleState.value = vehicleState.value.copy(
    ac = vehicleState.value.ac.copy(temperature = 25)
)

// è¾“å‡ºï¼š
// === å¼€å§‹æ›´æ–°æ¸©åº¦ ===
// ğŸ”¥ map æ‰§è¡Œäº†ï¼æå–æ¸©åº¦: 25
// ğŸ“± UI æ”¶åˆ°æ¸©åº¦æ›´æ–°: 25Â°C
```

**ç»“æœ**ï¼šâœ… map è‡ªåŠ¨æ‰§è¡Œäº†ï¼

---

## ğŸ¯ å…³é”®ç†è§£

### 1. map å»ºç«‹äº†"ç›‘å¬å…³ç³»"

```kotlin
val acFlow = vehicleState.map { it.ac }

// è¿™è¡Œä»£ç åšäº†ä»€ä¹ˆï¼Ÿ
// âœ… åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Flow
// âœ… è¿™ä¸ª Flow ä¼š"ç›‘å¬" vehicleState çš„å˜åŒ–
// âœ… å½“ vehicleState å‘å‡ºæ–°å€¼æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ map å‡½æ•°
```

### 2. stateIn æ¿€æ´»äº†"ç›‘å¬"

```kotlin
val acState = acFlow.stateIn(...)

// stateIn åšäº†ä»€ä¹ˆï¼Ÿ
// âœ… å¼€å§‹æ”¶é›† acFlowï¼ˆæ¿€æ´»ç›‘å¬ï¼‰
// âœ… å½“ acFlow å‘å‡ºå€¼æ—¶ï¼Œä¿å­˜åˆ° StateFlow ä¸­
// âœ… é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
```

### 3. collect æ¥æ”¶é€šçŸ¥

```kotlin
acState.collectLatest { acState ->
    updateACUI(acState)
}

// collect åšäº†ä»€ä¹ˆï¼Ÿ
// âœ… è®¢é˜… acState çš„å˜åŒ–
// âœ… å½“ acState æ›´æ–°æ—¶ï¼Œæ‰§è¡Œå›è°ƒ
```

---

## ğŸ“ˆ å¤šä¸ª map çš„æƒ…å†µ

### åœºæ™¯ï¼šå¤šä¸ª map åŒæ—¶ç›‘å¬

```kotlin
// ========== åˆ›å»ºå¤šä¸ª map ==========
val acFlow = vehicleState.map { it.ac }      // map 1
val doorFlow = vehicleState.map { it.door }  // map 2
val engineFlow = vehicleState.map { it.engine }  // map 3

// è½¬æ¢ä¸º StateFlowï¼ˆå¼€å§‹ç›‘å¬ï¼‰
val acState = acFlow.stateIn(...)
val doorState = doorFlow.stateIn(...)
val engineState = engineFlow.stateIn(...)

// æ›´æ–° VehicleState
vehicleState.value = vehicleState.value.copy(
    ac = ACState(temperature: 25),
    door = DoorState(isLocked: false)
)

// æ‰§è¡Œæµç¨‹ï¼š
// 1. vehicleState å‘å‡ºæ–°å€¼
// 2. map 1 è‡ªåŠ¨æ‰§è¡Œï¼šæå– ac â†’ ACState(temperature: 25)
// 3. map 2 è‡ªåŠ¨æ‰§è¡Œï¼šæå– door â†’ DoorState(isLocked: false)
// 4. map 3 è‡ªåŠ¨æ‰§è¡Œï¼šæå– engine â†’ EngineState(...)ï¼ˆæ²¡å˜åŒ–ï¼‰
// 
// 5. acState æ›´æ–° â†’ é€šçŸ¥è®¢é˜…è€…
// 6. doorState æ›´æ–° â†’ é€šçŸ¥è®¢é˜…è€…
// 7. engineState æ›´æ–°ï¼ˆè™½ç„¶å€¼æ²¡å˜ï¼Œä½†è§¦å‘äº†ï¼‰â†’ é€šçŸ¥è®¢é˜…è€…ï¼ˆStateFlowä¼šè‡ªåŠ¨å»é‡ï¼‰
```

**å…³é”®**ï¼šâœ… æ‰€æœ‰çš„ map éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œï¼

---

## ğŸ”„ å®Œæ•´çš„ç›‘å¬é“¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®æºå˜åŒ–                              â”‚
â”‚                                                         â”‚
â”‚  vehicleState.value = VehicleState(...)  â”€â”€â”€â”          â”‚
â”‚                                              â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              map è‡ªåŠ¨æ‰§è¡Œï¼ˆç›‘å¬ç”Ÿæ•ˆï¼‰                    â”‚
â”‚                                                         â”‚
â”‚  vehicleState.map { it.ac }  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  vehicleState.map { it.door } â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚           â”‚
â”‚  vehicleState.map { it.engine } â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚           â”‚
â”‚                                          â”‚â”‚â”‚           â”‚
â”‚  map 1 æ‰§è¡Œï¼šæå– ac                     â”‚â”‚â”‚           â”‚
â”‚  map 2 æ‰§è¡Œï¼šæå– door                   â”‚â”‚â”‚           â”‚
â”‚  map 3 æ‰§è¡Œï¼šæå– engine                 â”‚â”‚â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚â”‚â”‚
                                           â–¼â–¼â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Flow å‘å‡ºæ–°å€¼                                   â”‚
â”‚                                                         â”‚
â”‚  acFlow å‘å‡ºï¼šACState(...)    â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  doorFlow å‘å‡ºï¼šDoorState(...) â”€â”€â”€â”€â” â”‚                  â”‚
â”‚  engineFlow å‘å‡ºï¼šEngineState(...) â”â”‚ â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚â”‚â”‚
                                     â–¼â–¼â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        stateIn æ›´æ–° StateFlow                            â”‚
â”‚                                                         â”‚
â”‚  acState.value = ACState(...)    â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  doorState.value = DoorState(...) â”€â”€â”€â”€â” â”‚               â”‚
â”‚  engineState.value = EngineState(...) â”â”‚ â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚â”‚â”‚
                                        â–¼â–¼â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          é€šçŸ¥æ‰€æœ‰ collect è®¢é˜…è€…                        â”‚
â”‚                                                         â”‚
â”‚  acState.collectLatest { }    â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â†’ updateACUI()                     â”‚                  â”‚
â”‚                                       â”‚                  â”‚
â”‚  doorState.collectLatest { }  â”€â”€â”€â”€â”  â”‚                  â”‚
â”‚    â†’ updateDoorUI()                â”‚  â”‚                  â”‚
â”‚                                    â”‚  â”‚                  â”‚
â”‚  engineState.collectLatest { } â”€â”€â” â”‚  â”‚                  â”‚
â”‚    â†’ updateEngineUI()             â”‚ â”‚ â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ é‡è¦ç»†èŠ‚

### 1. map ä½•æ—¶å¼€å§‹ç›‘å¬ï¼Ÿ

```kotlin
val acFlow = vehicleState.map { it.ac }
// âš ï¸ æ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹ç›‘å¬
// map åªæ˜¯å®šä¹‰äº†è½¬æ¢è§„åˆ™

val acState = acFlow.stateIn(...)
// âœ… æ­¤æ—¶æ‰å¼€å§‹ç›‘å¬
// stateIn ä¼šå¼€å§‹æ”¶é›† acFlow
// acFlow å¼€å§‹ç›‘å¬ vehicleState
```

### 2. map æ‰§è¡Œå¤šå°‘æ¬¡ï¼Ÿ

```kotlin
// æ¯æ¬¡ vehicleState å‘å‡ºæ–°å€¼æ—¶ï¼Œmap éƒ½ä¼šæ‰§è¡Œ

vehicleState.value = VehicleState(...)  // map æ‰§è¡Œ 1 æ¬¡
vehicleState.value = VehicleState(...)  // map æ‰§è¡Œ 2 æ¬¡
vehicleState.value = VehicleState(...)  // map æ‰§è¡Œ 3 æ¬¡
```

### 3. å¤šä¸ª map æ˜¯ç‹¬ç«‹çš„å—ï¼Ÿ

```kotlin
val acFlow = vehicleState.map { it.ac }
val doorFlow = vehicleState.map { it.door }

// âœ… æ˜¯çš„ï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„
// âœ… æ¯ä¸ª map éƒ½ä¼šç‹¬ç«‹ç›‘å¬ vehicleState
// âœ… vehicleState å˜åŒ–æ—¶ï¼Œæ‰€æœ‰ map éƒ½ä¼šæ‰§è¡Œ
```

---

## âœ… æ€»ç»“

### ä½ çš„é—®é¢˜çš„ç­”æ¡ˆ

**Q1: map æœ‰ç›‘å¬æ•ˆæœå—ï¼Ÿ**
- âœ… æ˜¯çš„ï¼map ä¼šç›‘å¬æº Flow çš„å˜åŒ–

**Q2: æ›´æ”¹ VehicleState çš„ä»»æ„å€¼ï¼Œä¼šé€šçŸ¥æ‰€æœ‰ç›¸å…³çš„ map å—ï¼Ÿ**
- âœ… æ˜¯çš„ï¼æ‰€æœ‰çš„ map éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶æ‰§è¡Œ

**Q3: map ä¼šè‡ªåŠ¨æ‰§è¡Œè½¬æ¢å—ï¼Ÿ**
- âœ… æ˜¯çš„ï¼å½“æº Flow å‘å‡ºæ–°å€¼æ—¶ï¼Œmap å‡½æ•°è‡ªåŠ¨æ‰§è¡Œ

**Q4: æœ€åé€šçŸ¥åˆ° collect å—ï¼Ÿ**
- âœ… æ˜¯çš„ï¼è½¬æ¢åçš„å€¼é€šè¿‡ Flow â†’ StateFlow â†’ collect

### å®Œæ•´æµç¨‹

```
1. vehicleState.value = ...ï¼ˆæ›´æ–°ï¼‰
   â†“
2. vehicleState å‘å‡ºæ–°å€¼
   â†“
3. æ‰€æœ‰ map è‡ªåŠ¨æ‰§è¡Œï¼ˆç›‘å¬ç”Ÿæ•ˆï¼‰
   â†“
4. æ–°çš„ Flow å‘å‡ºè½¬æ¢åçš„å€¼
   â†“
5. stateIn æ›´æ–° StateFlow
   â†“
6. é€šçŸ¥æ‰€æœ‰ collect è®¢é˜…è€…
   â†“
7. UI æ›´æ–°
```

**æ ¸å¿ƒ**ï¼šmap å»ºç«‹äº†"ç›‘å¬å…³ç³»"ï¼Œå½“æº Flow å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œè½¬æ¢å¹¶é€šçŸ¥ä¸‹æ¸¸ï¼


